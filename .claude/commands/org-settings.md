---
description: OrgOS設定の変更（レビュー頻度、リテラシーレベルなど）
---

# /org-settings - 設定変更コマンド

プロジェクト進行中でも OrgOS の設定を変更できるコマンド。

---

## 対象設定

| 設定項目 | CONTROL.yaml キー | 説明 |
|----------|------------------|------|
| レビュー頻度 | `owner_review_policy.mode` | タスク完了時のレビュータイミング |
| タスク数 | `owner_review_policy.every_n_tasks` | mode=every_n_tasks の場合のタスク数 |
| ITリテラシーレベル | `owner_literacy_level` | 説明スタイルの調整 |

---

## 実行フロー

### Step 1: 現在の設定を読み込み・表示

`.ai/CONTROL.yaml` を読み込み、現在の設定を表示：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
⚙️ 現在の OrgOS 設定
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 設定項目 | 現在の値 |
|----------|----------|
| レビュー頻度 | 数タスクごと（3タスク） |
| ITリテラシーレベル | ふつう（intermediate） |
| ステージ遷移時レビュー | ON |
| main統合前レビュー | ON |
| リリース前レビュー | ON |
```

### Step 2: 変更する設定を選択

AskUserQuestion で確認：
```
質問: どの設定を変更しますか？

選択肢:
- レビュー頻度
  → タスク完了時のレビュータイミングを変更
- ITリテラシーレベル
  → 説明の詳しさ・専門用語の使い方を変更
- 複数の設定をまとめて変更
  → 上記すべてを順番に確認
- キャンセル
  → 変更せずに終了
```

---

### Step 3a: レビュー頻度の変更

「レビュー頻度」を選択した場合：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📋 レビュー頻度の変更
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

現在: 数タスクごと（3タスク）
```

AskUserQuestion で確認：
```
質問: 新しいレビュー頻度を選んでください

選択肢:
- タスクごとに確認（every_tick）
  → 各タスク完了時に結果を確認
- 数タスクごとに確認（every_n_tasks）
  → 指定タスク数ごとにまとめて確認
- 最後にまとめて確認（batch）
  → 全タスク完了後に一度だけ確認
- 自分から依頼するまで確認しない（manual）
  → 最大限の自動進行
```

**「数タスクごとに確認」を選択した場合、追加で確認：**
```
質問: 何タスクごとに確認しますか？

選択肢:
- 2タスクごと
- 3タスクごと（現在）
- 5タスクごと
- カスタム（数字を入力）
```

---

### Step 3b: ITリテラシーレベルの変更

「ITリテラシーレベル」を選択した場合：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
👤 ITリテラシーレベルの変更
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

現在: ふつう（intermediate）
```

AskUserQuestion で確認：
```
質問: 新しいレベルを選んでください

選択肢:
- やさしく説明してほしい（beginner）
  → 専門用語を避け、平易な日本語で説明
- ふつうでOK（intermediate）
  → 基本的なIT用語はOK、略語は初出時に補足
- 専門用語でOK（advanced）
  → 技術用語をそのまま使用、簡潔な説明
```

---

### Step 3c: 複数設定の変更

「複数の設定をまとめて変更」を選択した場合：

1. Step 3a（レビュー頻度）を実行
2. Step 3b（ITリテラシーレベル）を実行
3. 各ステップ後に「他にも変更しますか？」は聞かない（全部まとめて確認）

---

### Step 4: 確認と保存

変更内容をサマリ表示：

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
📝 設定の変更内容
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

| 設定項目 | 変更前 | 変更後 |
|----------|--------|--------|
| レビュー頻度 | every_n_tasks (3) | batch |
| ITリテラシーレベル | intermediate | advanced |

この変更は次の Tick から反映されます。
```

AskUserQuestion で確認：
```
質問: この内容で保存しますか？

選択肢:
- 保存する（推奨）
  → CONTROL.yaml を更新
- キャンセル
  → 変更を破棄
```

---

### Step 5: 保存処理

「保存する」を選択した場合：

1. **CONTROL.yaml を更新**
   - 変更した設定項目を書き換え
   - `tasks_since_last_review` をリセット（0に戻す）

2. **RUN_LOG.md に記録**
   ```
   [YYYY-MM-DD HH:MM] 設定変更: owner_review_policy.mode: every_n_tasks → batch
   [YYYY-MM-DD HH:MM] 設定変更: owner_literacy_level: intermediate → advanced
   ```

3. **DECISIONS.md に記録**（重要な変更の場合）
   ```markdown
   ## D-XXX: レビュー頻度を batch に変更
   - 日時: YYYY-MM-DD
   - 理由: Owner の判断
   - 影響: 以降のレビューは全タスク完了後にまとめて実行
   ```

---

### Step 6: 完了メッセージ

```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
✅ 設定を保存しました
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📄 .ai/CONTROL.yaml を更新しました

📌 次はこちら: /org-tick
   新しい設定は次の Tick から反映されます
```

---

## 設定のデフォルト値

新規プロジェクトまたはマイグレーション時のデフォルト：

| 設定項目 | デフォルト値 |
|----------|-------------|
| `owner_review_policy.mode` | `"every_n_tasks"` |
| `owner_review_policy.every_n_tasks` | `3` |
| `owner_review_policy.tasks_since_last_review` | `0` |
| `owner_literacy_level` | `"intermediate"` |

---

## 注意事項

- 設定変更は次の Tick から反映される
- `tasks_since_last_review` は設定変更時にリセットされる
- レビュー中のタスクには影響しない（完了してから反映）
- いつでも再度 `/org-settings` で変更可能

---

## 将来の拡張

以下の設定を追加予定：

| 設定項目 | 説明 |
|----------|------|
| `notification_level` | 通知の詳細度（none / summary / verbose） |
| `auto_commit_policy` | 自動コミットのタイミング |
| `parallel_task_limit` | 並列タスク数の上限 |

新設定が追加されたら、`/org-import` でマイグレーションされ、`/org-settings` で変更可能になる。
