# /org-learn

セッション中に発見した非自明なパターンをスキルとして保存する。

---

## 使用タイミング

- エラーを解決した後
- ワークアラウンドを発見した後
- プロジェクト固有のパターンを理解した後
- 「これは次回も使える」と思ったとき

---

## 実行手順

### Step 1: パターンの特定

セッション中の会話から、以下に該当するものを抽出:

| カテゴリ | 例 |
|----------|-----|
| エラー解決 | 「〇〇エラーは△△が原因。□□で解決」 |
| ワークアラウンド | 「本来は〇〇だが、△△で代替可能」 |
| プロジェクト固有 | 「このプロジェクトでは〇〇の命名規則を使う」 |
| ツール設定 | 「〇〇ツールは△△オプションで動作する」 |
| 外部API | 「〇〇APIは△△の制約がある」 |

### Step 2: ユーザーに確認

```
💡 学びを発見しました:

[パターン名]: 〇〇〇〇
[カテゴリ]: エラー解決 / ワークアラウンド / プロジェクト固有 / その他
[内容]:
  - 状況: ...
  - 解決策: ...
  - 注意点: ...

このパターンを保存しますか？ [Y/n]
```

### Step 3: スキルファイル生成

保存先: `.claude/skills/learned/{category}-{slug}.md`

テンプレート:

```markdown
# {パターン名}

> {1行サマリ}

## 状況

{どんな状況で発生するか}

## 解決策

{具体的な対応方法}

## 例

```{言語}
{コード例があれば}
```

## 注意点

- {落とし穴や補足}

---

_Learned: {日付}_
_Source: セッション会話_
```

### Step 4: 記録

1. `.ai/sessions/{今日}.md` の Key Learnings に追記
2. `.ai/DECISIONS.md` に記録（重要なパターンの場合）

---

## 出力例

```
✅ パターンを保存しました

📁 .claude/skills/learned/error-resolution-supabase-rls.md

💡 次回セッションから自動で参照されます。
   同様のエラーが発生した際に適用されます。

📌 次はこちら: 作業を続ける or /org-tick
```

---

## 自動学習との違い

| | /org-learn (手動) | Stop フック (自動) |
|---|---|---|
| タイミング | ユーザーが明示的に実行 | セッション終了時 |
| 精度 | 高（ユーザーが確認） | 中（自動抽出） |
| 対象 | 重要なパターン | 全般的な学び |
| 保存先 | .claude/skills/learned/ | .ai/sessions/ |

**推奨**: 重要なパターンは `/org-learn` で明示的に保存。
日常的な学びは Stop フックに任せる。

---

## 注意事項

- 機密情報（APIキー、パスワード等）を含むパターンは保存しない
- プロジェクト固有 vs 汎用 を意識して保存先を選ぶ
- 既存スキルと重複しないか確認する
