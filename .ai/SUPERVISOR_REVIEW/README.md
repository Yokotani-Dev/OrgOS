# SUPERVISOR_REVIEW/

> スーパーバイザー（上司）レビュー用のドキュメントを格納するフォルダ

---

## 目的

このフォルダは、部下が OrgOS を使ってプロジェクトを進める際に、上司がレビューするためのドキュメントを格納します。

---

## 3つのモード

OrgOS のスーパーバイザーレビューには3つのモードがあります：

### 1. 自分 + レビューあり（`self_with_reminder`）

**用途**: 自分でプロジェクトを進めるが、重要な判断時に上司に相談したい

**動作**:
- 重要な判断時にレビュードキュメントを自動生成
- 「上司に確認してください」とリマインド
- ただし、上司の承認なしでも進められる

**適したケース**:
- 自分で判断できるが、念のため確認したい
- 上司が多忙で、常にレビューを待てない

---

### 2. 自分のみ（`self_only`）

**用途**: 完全に自分で判断する（デフォルト）

**動作**:
- スーパーバイザーレビューなし
- OrgOS Manager が技術判断を主導
- Owner（自分）がビジネス判断のみを行う

**適したケース**:
- 自分で全て判断できる
- 上司の関与が不要

---

### 3. 部下 + スーパーバイザー（`subordinate_with_supervisor`）

**用途**: 部下が作業し、上司が重要な判断をレビューする

**動作**:
- 重要な判断時にレビュードキュメントを自動生成
- 上司の承認があるまで作業を停止（`awaiting_owner: true`）
- 部下は台帳を更新し、上司がレビュー・承認する

**適したケース**:
- 部下に作業を任せるが、判断は上司が行いたい
- 部下の判断能力がまだ十分でない
- プロジェクトのリスクが高い

---

## フォルダ構造

```
.ai/SUPERVISOR_REVIEW/
├── README.md              # このファイル
├── REVIEW-001.md          # レビュー依頼ドキュメント
├── REVIEW-002.md
└── archive/               # 承認済みレビューのアーカイブ
    └── REVIEW-001.md
```

---

## レビュードキュメントのフォーマット

各レビュードキュメント（`REVIEW-XXX.md`）は以下の構造を持ちます：

```markdown
# REVIEW-001: <判断内容のタイトル>

**作成日時**: 2026-01-23 10:30
**トリガー**: major_decision
**作業者**: <部下の名前>
**ステータス**: pending | approved | rejected

---

## 背景

<なぜこの判断が必要か>

---

## 判断内容

<何を決めるか>

---

## 選択肢

### [A] <選択肢1>（推奨）

- **メリット**: ...
- **デメリット**: ...
- **影響範囲**: ...

### [B] <選択肢2>

- **メリット**: ...
- **デメリット**: ...
- **影響範囲**: ...

---

## 推奨

Manager の推奨: **[A]**

理由: ...

---

## スーパーバイザーの判断

<!-- 上司がここに記入 -->

**判断**: [A] | [B] | その他

**理由**:

**追加指示**:

**承認日時**:
```

---

## 計画乖離検知

スーパーバイザーレビューが有効な場合、Manager は定期的に以下をチェックします：

### チェック項目

| 項目 | 基準 | 対応 |
|------|------|------|
| **スコープ乖離** | BRIEF.md と実際の作業内容が30%以上乖離 | レビュードキュメント生成 |
| **タスク追加** | 計画にないタスクが5個以上追加 | レビュードキュメント生成 |
| **技術スタック変更** | 当初と異なる技術を採用 | レビュードキュメント生成 |
| **期限超過** | 見積もりの150%を超過 | レビュードキュメント生成 |

### 乖離の計算方法

```python
# 疑似コード
def calculate_drift():
    original_scope = parse_brief_md()
    current_scope = parse_project_md()

    # タスク数の乖離
    task_drift = abs(len(current_tasks) - len(planned_tasks)) / len(planned_tasks)

    # スコープの乖離（意味的類似度）
    scope_drift = 1 - semantic_similarity(original_scope, current_scope)

    # 総合乖離率
    total_drift = (task_drift + scope_drift) / 2

    return total_drift
```

### 閾値

- **30%未満**: 正常範囲
- **30-50%**: 警告（レビュー推奨）
- **50%以上**: 重大な乖離（レビュー必須）

---

## 使い方

### 部下の作業フロー

1. `/org-start` で `subordinate_with_supervisor` モードを選択
2. BRIEF.md を記入して作業開始
3. 重要な判断が発生すると、Manager がレビュードキュメントを生成
4. `awaiting_owner: true` になり、作業が停止
5. 上司に連絡し、SUPERVISOR_REVIEW/ のドキュメントを確認してもらう
6. 上司が承認したら、OWNER_COMMENTS.md に記入
7. `/org-tick` で作業を再開

### 上司のレビューフロー

1. 部下から連絡を受ける
2. `.ai/SUPERVISOR_REVIEW/REVIEW-XXX.md` を開く
3. 背景・選択肢・推奨を確認
4. 判断を記入（承認 or 却下 or 別案）
5. `.ai/OWNER_COMMENTS.md` に判断を記入
6. 部下に連絡

---

## 参考

- [CLAUDE.md](../../CLAUDE.md) - スーパーバイザーレビューのルール
- [CONTROL.yaml](../CONTROL.yaml) - supervisor_review セクション
