# Work Order: T-OS-021

## Task
- ID: T-OS-021
- Title: レビュー指摘修正 P2: エージェント定義の補完・整理
- Role: implementer

## Allowed Paths
- `.claude/agents/`

## Acceptance Criteria
- org-integrator.md を拡充（役割・手順・判断基準を追加）
- org-os-maintainer.md を拡充
- org-implementer.md を削除（DEPRECATED済み）
- AGENTS.md を CODEX_WORKER_GUIDE.md にリネーム

## Dependencies
- T-OS-019: done

## Instructions

### 1. org-integrator.md の拡充
現在の org-integrator.md は簡素すぎる。以下を追加:
- **役割**: main ブランチへの統合、競合解消、リリース判断の補助
- **手順**: worktree からの統合フロー（git merge / rebase の選択基準）
- **判断基準**: マージ可否の判定条件（テスト通過、レビュー承認、CONTROL.yaml の allow_push_main）
- **安全ルール**: Owner 承認が必要な操作の一覧
- 他の agent 定義（org-reviewer.md 等）のフォーマットに合わせる

### 2. org-os-maintainer.md の拡充
現在の org-os-maintainer.md は簡素すぎる。以下を追加:
- **役割**: OrgOS の運用ログを読み、改善提案（OIP）を書く。適用はしない。
- **入力**: セッションログ（.ai/sessions/）、RUN_LOG、DECISIONS.md
- **出力**: .ai/OIP/ に改善提案を書く
- **判断基準**: どのような問題パターンが OIP に値するか
- **制約**: OIP を書くだけで、実装は Manager/Owner 判断

### 3. org-implementer.md の削除
- このファイルは DEPRECATED 宣言済み
- `codex-implementer`（Codex CLI）に完全移行済み
- ファイルを削除する

### 4. AGENTS.md → CODEX_WORKER_GUIDE.md にリネーム
- `.claude/agents/AGENTS.md` を `.claude/agents/CODEX_WORKER_GUIDE.md` にリネーム
- ファイルの冒頭タイトルも変更
- **重要**: 他のファイルから `AGENTS.md` を参照している箇所を検索し、すべて `CODEX_WORKER_GUIDE.md` に更新すること
  - 主な参照元: `CLAUDE.md`, `.claude/commands/org-tick.md`, `.claude/rules/output-management.md`, `.claude/rules/design-documentation.md`
  - `grep -r "AGENTS.md" .claude/ CLAUDE.md .ai/` で確認

## Reference
- AGENTS.md（必読）
- .claude/agents/org-integrator.md
- .claude/agents/org-os-maintainer.md
- .claude/agents/org-implementer.md
- .claude/agents/org-reviewer.md（フォーマット参考）
- .claude/rules/agent-coordination.md
